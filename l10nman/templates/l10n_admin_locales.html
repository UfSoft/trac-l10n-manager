<!--!
  l10n_admin_locales
  Created by Pedro Algarvio on 2008-05-08-15
  Copyright (c) 2008 Pedro Algarvio. All rights reserved.
-->
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">
  <xi:include href="admin.html" />
  <head>
    <title>L10N Manager - Manage Catalogs</title>
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("#catalog").suggest();
        $("#locale").suggest("", "locale");
      });
    </script>
    <link type="text/css" href="${req.href.chrome('l10nman/css/l10n_style.css')}" rel="stylesheet"/>
  </head>
  <body>
    <h2>Manage Catalogs</h2>

    <div class="system-message" py:if="defined('error')">
      <span class="system-message">$error</span>
    </div>

    <form action="" name="new_locale" id="new_locale" method="post">
      <fieldset>
        <legend>Add new locale</legend>
        <table class="side_heads">
          <tr>
            <th><label for="catalog_template">Catalog Template:</label></th>
            <td>
              <select name="catalog_template">
                <option py:for="catalog in catalog_templates"
                        value="$catalog.fpath">$catalog.fpath</option>
              </select>
            </td>
          </tr>
          <tr>
            <th><label for="locale">Locale:</label></th>
            <td><input type="text" id="locale" name="locale"/></td>
          </tr>
          <tr>
            <th><label for="catalog">Catalog Path:</label></th>
            <td><input type="text" id="catalog" name="catalog" size="40"
                       value="${defined('catalog') and catalog or '/'}"/></td>
          </tr>
        </table>
        <div class="buttons">
          <input type="submit" name="add_locale" value="Add Locale"/>
        </div>
      </fieldset>
    </form>

    <form action="" id="catalogs_listing" name="new_catalog"
          method="post" py:if="locales">
      <table class="listing">
        <thead>
          <tr>
            <th class="sel">&nbsp;</th>
            <th>Catalog Template</th>
            <th>Locale</th>
            <th>Catalog Path</th>
            <th>Revision</th>
          </tr>
        </thead>
        <tbody>
          <tr py:for="locale in locales">
            <td><input type="checkbox" value="$locale.id" name="sel"/></td>
            <td><a href="${req.href.browser(locale.template)}">$locale.template</a></td>
            <td><a href="${req.href.translations(locale.id)}">$locale.locale</a></td>
            <td><a href="${req.href.browser(locale.fpath)}">$locale.fpath</a></td>
            <td>
              <a href="${req.href.browser(locale.fpath, rev=locale.revision)}"
                 title="File youngest revision on repository">
                $locale.revision</a>
                (<a href="${req.href.browser(locale.fpath)}"
                   title="Repository youngest revision">${youngest_rev}</a>)
            </td>
          </tr>
        </tbody>
      </table>
      <div class="buttons">
          <input type="submit" name="delete_selected" value="Remove Selected" />
      </div>
    </form>
  </body>
</html>
